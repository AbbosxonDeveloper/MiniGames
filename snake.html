<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            background-color: #333;
            margin: 0;
            overflow: hidden;
        }

        canvas {
            border: 2px solid #fff;
        }
    </style>
</head>

<body>

    <canvas id="snake" width="608" height="608"></canvas>

    <script>
        var c = document.getElementById("snake");
        var ctx = c.getContext("2d");

        var gridSize = 20;
        var grid = new Array(608 / gridSize);
        for (var i = 0; i < grid.length; i++) {
            grid[i] = new Array(608 / gridSize);
        }

        var snakeSize = 20;
        var snake = [{ x: 200, y: 200 }];
        var food = { x: 300, y: 300 };
        var velocity = { x: 0, y: 0 };
        var newVelocity = { x: 0, y: 0 };

        document.addEventListener('keydown', function (event) {
            if (event.keyCode == 37 && velocity.x == 0) newVelocity = { x: -gridSize, y: 0 };
            if (event.keyCode == 38 && velocity.y == 0) newVelocity = { x: 0, y: -gridSize };
            if (event.keyCode == 39 && velocity.x == 0) newVelocity = { x: gridSize, y: 0 };
            if (event.keyCode == 40 && velocity.y == 0) newVelocity = { x: 0, y: gridSize };
        });

        function update() {
            if (velocity.x != newVelocity.x || velocity.y != newVelocity.y) {
                velocity = newVelocity;
            }

            var head = { x: snake[0].x + velocity.x, y: snake[0].y + velocity.y };
            if (snake.some(function (part) { return part.x == head.x && part.y == head.y; })) {
                alert('Game Over');
                location.reload();
            }

            if (head.x == food.x && head.y == food.y) {
                var newFood = false;
                while (!newFood) {
                    var newX = Math.floor(Math.random() * (608 / gridSize - 1)) * gridSize;
                    var newY = Math.floor(Math.random() * (608 / gridSize - 1)) * gridSize;
                    if (!snake.some(function (part) { return part.x == newX && part.y == newY; })) {
                        newFood = true;
                        food = { x: newX, y: newY };
                    }
                }
            } else {
                snake.pop();
            }

            snake.unshift(head);

            draw();

            setTimeout(update, 100);
        }

        function draw() {
            ctx.clearRect(0, 0, 608, 608);

            for (var i = 0; i < snake.length; i++) {
                ctx.fillStyle = (i == 0) ? 'green' : 'yellow';
                ctx.fillRect(snake[i].x, snake[i].y, gridSize, gridSize);
                ctx.strokeStyle = 'black';
                ctx.strokeRect(snake[i].x, snake[i].y, gridSize, gridSize);
            }

            ctx.fillStyle = 'red';
            ctx.fillRect(food.x, food.y, gridSize, gridSize);
            ctx.strokeStyle = 'black';
            ctx.strokeRect(food.x, food.y, gridSize, gridSize);
        }

        update();
    </script>

</body>

</html>